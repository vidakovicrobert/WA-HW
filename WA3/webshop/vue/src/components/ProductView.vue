<template>
    <!--Koristi TailwindCSS klase-->

    <div class="bg-white">
        <div class="pt-6">
            <nav aria-label="Breadcrumb">
                <ol role="list" class="mx-auto flex max-w-2xl items-center space-x-2 px-4 sm:px-6 lg:max-w-7xl lg:px-8">
                    <li>
                        <div class="flex items-center">
                            <a href="#" class="mr-2 text-sm font-medium text-gray-900">Odjeća</a>
                            <svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true"
                                class="h-5 w-4 text-gray-300">
                                <path d="M5.697 4.34L8.98 16.532h1.327L7.025 4.341H5.697z" />
                            </svg>
                        </div>
                    </li>

                    <li class="text-sm">
                        <div v-if="proizvod">
                            <a href="#" aria-current="page" class="font-medium text-gray-500 hover:text-gray-600">
                                {{ proizvod.naziv }}</a>
                            <h1 class="text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl">{{
                                proizvod.naziv }}</h1>
                        </div>
                    </li>
                </ol>
            </nav>

            <!-- Image gallery -->
            <div class="mx-auto mt-6 max-w-2xl sm:px-6 lg:grid lg:max-w-7xl lg:grid-cols-3 lg:gap-x-8 lg:px-8">
                <div class="aspect-h-4 aspect-w-3 hidden overflow-hidden rounded-lg lg:block">
                    <img src="https://stevenseagulls.com/wp-content/uploads/2023/03/SNS_merkkarit-8-scaled.jpg"
                        alt="Two each of gray, white, and black shirts laying flat."
                        class="h-full w-full object-cover object-center" />
                </div>
                <div class="hidden lg:grid lg:grid-cols-1 lg:gap-y-8">
                    <div class="aspect-h-2 aspect-w-3 overflow-hidden rounded-lg">
                        <img src="https://i.etsystatic.com/39007565/r/il/d0acd6/5797383193/il_570xN.5797383193_1uhy.jpg"
                            alt="illo inventore veritatis et quasi architecto beatae vitae"
                            class="h-full w-full object-cover object-center" />
                    </div>
                    <div class="aspect-h-2 aspect-w-3 overflow-hidden rounded-lg">
                        <img src="https://shop.getbasic.com/cdn/shop/products/DSC_3939_2000x.jpg?v=1606159729"
                            alt="accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab"
                            class="h-full w-full object-cover object-center" />
                    </div>
                </div>
                <div class="aspect-h-2 aspect-w-3 overflow-hidden rounded-lg">
                    <img src="https://contents.mediadecathlon.com/p2167060/k$3b7dcd89be08883fcfd846a71531b6ee/men-s-breathable-t-shirt-soft-black-kalenji-8648809.jpg?f=1920x0&format=auto"
                        alt="Sed ut perspiciatis unde omnis iste natus error sit voluptatem"
                        class="h-full w-full object-cover object-center" />
                </div>
            </div>

            <!-- Product info -->
            <div
                class="mx-auto max-w-2xl px-4 pb-16 pt-10 sm:px-6 lg:grid lg:max-w-7xl lg:grid-cols-3 lg:grid-rows-[auto,auto,1fr] lg:gap-x-8 lg:px-8 lg:pb-24 lg:pt-16">
                <div class="lg:col-span-2 lg:border-r lg:border-gray-200 lg:pr-8">
                    <h1 class="text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl">Naslov proizvoda</h1>
                </div>

                <!-- Options -->
                <div class="mt-4 lg:row-span-3 lg:mt-0">
                    <h2 class="sr-only">Product information</h2>
                    <p class="text-3xl tracking-tight text-gray-900">{{ proizvod.cijena }}€</p>

                    <form class="mt-10">
                        <!-- Colors -->
                        <div>
                            <h3 class="text-sm font-medium text-gray-900">Boje</h3>

                            <fieldset aria-label="Choose a color" class="mt-4">
                                <div class="flex items-center space-x-3">
                                    <!-- Active and Checked: "ring ring-offset-1" -->
                                    <label aria-label="White"
                                        class="relative -m-0.5 flex cursor-pointer items-center justify-center rounded-full p-0.5 ring-gray-400 focus:outline-none">
                                        <input type="radio" name="color-choice" value="White" class="sr-only" />
                                        <span aria-hidden="true"
                                            class="h-8 w-8 rounded-full border border-black border-opacity-10 bg-white"></span>
                                    </label>
                                    <!-- Active and Checked: "ring ring-offset-1" -->
                                    <label aria-label="Gray"
                                        class="relative -m-0.5 flex cursor-pointer items-center justify-center rounded-full p-0.5 ring-gray-400 focus:outline-none">
                                        <input type="radio" name="color-choice" value="Gray" class="sr-only" />
                                        <span aria-hidden="true"
                                            class="h-8 w-8 rounded-full border border-black border-opacity-10 bg-gray-200"></span>
                                    </label>
                                    <!-- Active and Checked: "ring ring-offset-1" -->
                                    <label aria-label="Black"
                                        class="relative -m-0.5 flex cursor-pointer items-center justify-center rounded-full p-0.5 ring-gray-900 focus:outline-none">
                                        <input type="radio" name="color-choice" value="Black" class="sr-only" />
                                        <span aria-hidden="true"
                                            class="h-8 w-8 rounded-full border border-black border-opacity-10 bg-gray-900"></span>
                                    </label>
                                </div>
                            </fieldset>
                        </div>

                        <!-- Sizes -->
                        <div class="mt-10">
                            <div class="flex items-center justify-between">
                                <h3 class="text-sm font-medium text-gray-900">Veličina</h3>

                            </div>

                            <fieldset aria-label="Choose a size" class="mt-4">
                                <div class="grid grid-cols-4 gap-4 sm:grid-cols-8 lg:grid-cols-4">
                                    <!-- Active: "ring-2 ring-indigo-500" -->
                                    <label
                                        class="group relative flex cursor-not-allowed items-center justify-center rounded-md border bg-gray-50 px-4 py-3 text-sm font-medium uppercase text-gray-200 hover:bg-gray-50 focus:outline-none sm:flex-1 sm:py-6">
                                        <input type="radio" name="size-choice" value="_" disabled class="sr-only" />
                                        <span>_</span>
                                        <span aria-hidden="true"
                                            class="pointer-events-none absolute -inset-px rounded-md border-2 border-gray-200">
                                            <svg class="absolute inset-0 h-full w-full stroke-2 text-gray-200"
                                                viewBox="0 0 100 100" preserveAspectRatio="none" stroke="currentColor">
                                                <line x1="0" y1="100" x2="100" y2="0"
                                                    vector-effect="non-scaling-stroke" />
                                            </svg>
                                        </span>
                                    </label>
                                    <!-- Active: "ring-2 ring-indigo-500" -->

                                    <div v-for="velicina in proizvod.velicine" :key="velicina">
                                        <!-- v-for direktiva za iscrtavanje veličina -->
                                        <label class="group relative flex cursor-pointer items-center justify-center rounded-md

border bg-white px-4 py-3 text-sm font-medium uppercase text-gray-900 shadow-sm hover:bg-
gray-50 focus:outline-none sm:flex-1 sm:py-6">
                                            <input type="radio" name="size-choice" value="_" class="sr-only" />
                                            <span>{{ velicina }}</span>
                                            <!--
Active: "border", Not Active: "border-2"
Checked: "border-indigo-500", Not Checked: "border-transparent"
-->
                                            <span class="pointer-events-none absolute -inset-px rounded-md"
                                                aria-hidden="true">
                                            </span>
                                        </label>
                                        <!-- Active: "ring-2 ring-indigo-500" -->
                                    </div>
                                </div>
                            </fieldset>
                        </div>

                        <button type="submit" @click="posaljiNarudzbu" class="mt-10 flex w-full items-center justify-center rounded-md border border-
transparent bg-indigo-600 px-8 py-3 text-base font-medium text-white hover:bg-indigo-700

focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                            Dodaj u košaricu
                        </button>
                    </form>
                </div>

                <div class="py-10 lg:col-span-2 lg:col-start-1 lg:border-r lg:border-gray-200 lg:pb-16 lg:pr-8 lg:pt-6">
                    <!-- Description and details -->
                    <div>
                        <h3 class="sr-only">Description</h3>

                        <div class="space-y-6">
                            <p class="text-base text-gray-900">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                incididunt ut labore et dolore magna aliqua. Ut enim ad
                                minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                                consequat. Duis aute irure dolor in reprehenderit
                                in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
                                cupidatat non proident, sunt in culpa qui
                                officia deserunt mollit anim id est laborum.
                            </p>
                        </div>
                    </div>

                    <div class="mt-10">
                        <h3 class="text-sm font-medium text-gray-900">Karakteristike</h3>

                        <div class="mt-4">
                            <ul role="list" class="list-disc space-y-2 pl-4 text-sm">
                                <li class="text-gray-400">
                                    <span class="text-gray-600">Sed ut perspiciatis unde omnis iste natus error sit
                                        voluptatem accusantium</span>
                                </li>
                                <li class="text-gray-400">
                                    <span class="text-gray-600">doloremque laudantium, totam rem aperiam, eaque ipsa
                                        quae ab illo inventore veritatis et quasi architecto</span>
                                </li>
                                <li class="text-gray-400"><span class="text-gray-600">beatae vitae dicta sunt
                                        explicabo</span></li>
                                <li class="text-gray-400">
                                    <span class="text-gray-600">Nemo enim ipsam voluptatem quia voluptas sit aspernatur
                                        aut odit aut fugit</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="mt-10">
                        <h2 class="text-sm font-medium text-gray-900">Detalji</h2>

                        <div class="mt-4 space-y-6">
                            <p class="text-sm text-gray-600">Lorem ipsum dolor sit amet, consectetur adipiscing elit,
                                sed do eiusmod tempor incididunt ut labore</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';

import axios from 'axios';


let proizvod = ref({
    id: 0,
    naziv: '',
    cijena: 0,
    velicine: []
});

let podaci = ref({
    naruceni_proizvodi: [
        { id: 1, narucena_kolicina: 2 },
        { id: 3, narucena_kolicina: 1 },
    ],
});

// asinkroni callback (hook)
onMounted(async () => {
    try {
        const response = await axios.get('http://localhost:3000/proizvodi/1');
        proizvod.value = response.data; // postavljanje podataka u reaktivnu varijablu
    } catch (error) {
        console.error('Greška u dohvatu podataka: ', error);
    }
});

const posaljiNarudzbu = async () => {
    try {
        let response = await axios.post('http://localhost:3000/narudzbe', podaci.value); // axios.post(url, data)
        console.log(response);
    } catch (error) {
        console.error('Greška u dohvatu podataka: ', error);
    }
};


</script>